language: perl

perl:
   - "5.24"
   - "5.22"
   - "5.20"
   - "5.18"
   - "5.16"
   - "5.14"
   - "5.12"
   - "5.10"
   - "5.8"

sudo: false

notifications:
   on_success: change
   on_failure: always
   irc:
      channels:
         - "irc.perl.org#perlcritic"
      template:
         - "%{branch}: %{message} %{build_url}"

addons:
  apt:
    packages:
    - aspell
    - aspell-en
    - oracle-java8-installer


install:
   - cpanm Perl::Critic::More Test::Perl::Critic Devel::EnforceEncapsulation

env:
  global:
    - JAVA_HOME=/usr/lib/jvm/java-8-oracle

script:
   - export HARNESS_OPTIONS='j:c'
   - perl Build.PL
   - ./Build authortest
